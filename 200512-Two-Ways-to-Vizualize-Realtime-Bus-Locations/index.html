<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.75 'Merriweather','Georgia',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.9);font-family:'Merriweather','Georgia',serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:Montserrat,sans-serif;font-weight:900;text-rendering:optimizeLegibility;font-size:2.5rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.73286rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.4427rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;letter-spacing:0.140625em;text-transform:uppercase;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.83255rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.75966rem;line-height:1.1;font-style:italic;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}ul{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;list-style:disc;}ol{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:0.85rem;line-height:1.75rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1rem;line-height:1.75rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}blockquote{margin-left:-1.75rem;margin-right:1.75rem;margin-top:0;padding-bottom:0;padding-left:1.42188rem;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1.20112rem;line-height:1.75rem;color:hsla(0,0%,0%,0.59);font-style:italic;border-left:0.32813rem solid hsla(0,0%,0%,0.9);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.75rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.75rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}li > ul{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.75rem / 2);}code{font-size:0.85rem;line-height:1.75rem;}kbd{font-size:0.85rem;line-height:1.75rem;}samp{font-size:0.85rem;line-height:1.75rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.16667rem;padding-right:1.16667rem;padding-top:0.875rem;padding-bottom:calc(0.875rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.75rem;color:hsla(0,0%,0%,0.9);font-weight:400;}blockquote cite:before{content:"— ";}ul,ol{margin-left:0;}@media only screen and (max-width:480px){ul,ol{margin-left:1.75rem;}blockquote{margin-left:-1.3125rem;margin-right:0;padding-left:0.98438rem;}}h1,h2,h3,h4,h5,h6{margin-top:3.5rem;}a{box-shadow:0 1px 0 0 currentColor;color:#007acc;text-decoration:none;}a:hover,a:active{box-shadow:none;}mark,ins{background:#007acc;color:white;padding:0.10938rem 0.21875rem;text-decoration:none;}a.gatsby-resp-image-link{box-shadow:none;}</style><style data-href="/styles.5f81339daa9828444137.css">@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/static/montserrat-latin-100-191cc9f50f3b76b9617cb383f19acb7d.woff2) format("woff2"),url(/static/montserrat-latin-100-370318464551d5f25b0f0a78f374faac.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/static/montserrat-latin-100italic-bdeaeb79db315697bd173a55b097dc18.woff2) format("woff2"),url(/static/montserrat-latin-100italic-ecf7d49386e8f265878e735db34a7c4b.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/static/montserrat-latin-200-85d5ef9db7f2dc6979172a4a3b2c57cb.woff2) format("woff2"),url(/static/montserrat-latin-200-1fc98e126a3d152549240e6244d7e669.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/static/montserrat-latin-200italic-49095760a498d024fe1a85a078850df9.woff2) format("woff2"),url(/static/montserrat-latin-200italic-fe46cf8b9462c820457d3bf537e4057f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/static/montserrat-latin-300-7c3daf12b706645b5d3710f863a4da04.woff2) format("woff2"),url(/static/montserrat-latin-300-8dc95fab9cf98d02ca8d76e97d3dff60.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/static/montserrat-latin-300italic-f20b178ca2024a5eac8e42e6649db86c.woff2) format("woff2"),url(/static/montserrat-latin-300italic-3fe16939288856e8e828fa2661bf2354.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/static/montserrat-latin-400-bc3aa95dca08f5fee5291e34959c27bc.woff2) format("woff2"),url(/static/montserrat-latin-400-8102c4838f9e3d08dad644290a9cb701.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/static/montserrat-latin-400italic-5cad650422a7184467af5a4d17b264c4.woff2) format("woff2"),url(/static/montserrat-latin-400italic-d191f22af3bb50902b99ac577f81a322.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/static/montserrat-latin-500-92d16e458625f4d2c8940f6bdca0ff09.woff2) format("woff2"),url(/static/montserrat-latin-500-8b763220218ffc11c57c84ddb80e7b26.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/static/montserrat-latin-500italic-47bfcca6b69d6a9acca7a8bff17193e2.woff2) format("woff2"),url(/static/montserrat-latin-500italic-72c01f753c3940c0b9cb6bf2389caddf.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/static/montserrat-latin-600-6fb1b5623e528e27c18658fecf5ee0ee.woff2) format("woff2"),url(/static/montserrat-latin-600-7c839d15a6f54e7025ba8c0c4b333e8f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/static/montserrat-latin-600italic-60789af1c9338ed1a9546722ec54b4f7.woff2) format("woff2"),url(/static/montserrat-latin-600italic-f3d4de8d0afb19e777c79032ce828e3d.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/static/montserrat-latin-700-39d93cf678c740f9f6b2b1cfde34bee3.woff2) format("woff2"),url(/static/montserrat-latin-700-80f10bd382f0df1cd650fec59f3c9394.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/static/montserrat-latin-700italic-ba136d97b14e82284dd595e257f11c47.woff2) format("woff2"),url(/static/montserrat-latin-700italic-8c98142b425630821139c24bd1698700.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/static/montserrat-latin-800-b7018be9ed6cd94da8b6675b3a468c3b.woff2) format("woff2"),url(/static/montserrat-latin-800-9a9befcf50d64f9d2d19d8b1d1984add.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/static/montserrat-latin-800italic-540ffdd223d1a9ad3d4e678e1a23372e.woff2) format("woff2"),url(/static/montserrat-latin-800italic-897086f99f4e1f45e6b1e9368527d0bc.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/static/montserrat-latin-900-58cd789700850375b834e8b6776002eb.woff2) format("woff2"),url(/static/montserrat-latin-900-26d42c9428780e545a540bbb50c84bce.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/static/montserrat-latin-900italic-451157bc8861fe54f523b3669a3def71.woff2) format("woff2"),url(/static/montserrat-latin-900italic-a8ec4957e1c24f5793305763ad9845b3.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/static/merriweather-latin-300-b1158cfcd4aacb9d8fb61625e37af46a.woff2) format("woff2"),url(/static/merriweather-latin-300-cc7de05e166e90320d7d896e0f72a19d.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/static/merriweather-latin-300italic-8fe52a48089d6ebe46db0b8e7cc66263.woff2) format("woff2"),url(/static/merriweather-latin-300italic-e1331f5397c2a673f9d3765138debdb5.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/static/merriweather-latin-400-8276fdb72ae8f4714d4e6eba704cc39f.woff2) format("woff2"),url(/static/merriweather-latin-400-69f09800f4f6479d06e44eba837df872.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/static/merriweather-latin-400italic-3a9be9ea9f7aa4af6de7307df21d9fc0.woff2) format("woff2"),url(/static/merriweather-latin-400italic-d76079ed7541a433a54f79316de086e9.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/static/merriweather-latin-700-fa534be7ffa380e39a7f6e03bf9a5e03.woff2) format("woff2"),url(/static/merriweather-latin-700-ba56ea84b8084b7ff9677f50d3cd81bd.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/static/merriweather-latin-700italic-1ef5edaaa20ae53ea50399884c5e48c6.woff2) format("woff2"),url(/static/merriweather-latin-700italic-534bc9e7ce93c73d73426e46acd78092.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/static/merriweather-latin-900-7528fb70e8a4a82c7305e72ff43ac25f.woff2) format("woff2"),url(/static/merriweather-latin-900-3799b6e2f5ed3fcccf9d7a708d7419fa.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/static/merriweather-latin-900italic-e1b4d2aaa78e12ad84aaf8a56321e4c2.woff2) format("woff2"),url(/static/merriweather-latin-900italic-2ae22f731b3424e8dbb4b37f7ca6e708.woff) format("woff")}</style><meta name="generator" content="Gatsby 2.19.17"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png"/><title data-react-helmet="true">Vizualizing Realtime Bus Locations using GTFS-RT | AvidDabbler Blog</title><meta data-react-helmet="true" name="description" content="A web developer&#x27;s guide to vizualizing GTFS-RT with Python or JavaScript"/><meta data-react-helmet="true" property="og:title" content="Vizualizing Realtime Bus Locations using GTFS-RT"/><meta data-react-helmet="true" property="og:description" content="A web developer&#x27;s guide to vizualizing GTFS-RT with Python or JavaScript"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="Walter Jenkins"/><meta data-react-helmet="true" name="twitter:title" content="Vizualizing Realtime Bus Locations using GTFS-RT"/><meta data-react-helmet="true" name="twitter:description" content="A web developer&#x27;s guide to vizualizing GTFS-RT with Python or JavaScript"/><link as="script" rel="preload" href="/webpack-runtime-8f2e3488a851bf2bc4b3.js"/><link as="script" rel="preload" href="/styles-47650936bd9d421e990d.js"/><link as="script" rel="preload" href="/app-b28b59c8508f5cd2545d.js"/><link as="script" rel="preload" href="/commons-bf1a251c391231b74368.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-48f3806a20e7fba707fc.js"/><link as="fetch" rel="preload" href="/page-data\200512-Two-Ways-to-Vizualize-Realtime-Bus-Locations\page-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div style="margin-left:auto;margin-right:auto;max-width:42rem;padding:2.625rem 1.3125rem"><header><h3 style="font-family:Montserrat, sans-serif;margin-top:0"><a style="box-shadow:none;text-decoration:none;color:inherit" href="/">AvidDabbler Blog</a></h3></header><main><article><header><h1 style="margin-top:1.75rem;margin-bottom:0">Vizualizing Realtime Bus Locations using GTFS-RT</h1><p style="font-size:0.83255rem;line-height:1.75rem;display:block;margin-bottom:1.75rem">April 19, 2020</p></header><section><h2>Introduction</h2>
<p>So over the years I have worked with GTFS feeds from agencies all around to run analysis and build frequency and trip based GIS visualizations. A separate feed from <a href="https://developers.google.com/transit/gtfs">GTFS</a> is called <a href="https://developers.google.com/transit/gtfs-rt">GTFS-RT</a> that displays the Realtime locations. This feed as well as GTFS is a global standard and if you wanted to work with this kind of data in your own city check with your local transit authority to see if they are one of the Agencies that <a href="https://transitfeeds.com/">Openly Publish</a> there information.</p>
<p>This blog post started with a Twitter poll where I asked what people would be interested in me writing about and it was overwhelmingly in favor of Realtime bus locations. Granted the othere options were pretty much geared toward transit policy woks and people like pretty things, but I digress. Vizualizing GTFS-RT has been on my todo list for some time and I am glad that I got around to tackling the problem.</p>
<h3>Data Two Ways</h3>
<p>Starting this project it was geared toward the agency wanting to create a service that would process the information server side and host as a Hosted Service for use on an ArcGIS Enterprise system. However, I ended up failing to do so, but have been able to get it running on my local machine so I will show you how I did that. I do have some plans to get this running using a Lambda function or ec2 instance in the future, but haven’t played around with it too much.</p>
<p>The other way that I was able to get it up and running is through the MapBox PB API. I started this article thinking that I was going to cover it, but to be quite honest you should go read his <a href="https://gavinr.com/protocol-buffers-protobuf-browser/">post</a> it is so much better than anything that I could write so I am just going to cover what I ended up fulling putting together on my end using Python. </p>
<h2>Building a Feature Service using Python</h2>
<p>So I am going to be honest. I am not sure if I am using this term correctly. In ArcGIS Online/Enterprise world a GIS layer on their online platfor is called a Hosted Feature, but at the end of this you will just be left with a Python script that will output a json file that you can map out. </p>
<h3>Getting your data</h3>
<p>So like I said previously you will need a GTFS and GTFS-RT for this project which are generally available openly for most transit agencies. The GTFS is the static feed. This feed will have all of the static elements that will repeat over time, like Stop locations, route attributes, and trip alignments. I have separated each of these out into 2 different calls because the GTFS will at most change once a week where as the GTFS-RT is going to update around every 30 seconds. </p>
<p><em>Rule of Thumb: Transit agencies generally change their GTFS on Monday</em></p>
<p><strong>GTFS fetch</strong></p>
<p>The first thing that you are going to want to do is fetch the Python file and extract the data. Making sure this is run at the top of the script so you do not run this in a loop and when it starts up the first thing it will do is make sure that there is a fresh GTFS to go with the realtime information that is getting pulled in. The purpose for this is the GTFS-RT does not have all of the relevant information that someone would want, but the GTFS is designed to link up to the GTFS-RT and it has all of the information that you would want. </p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">def getGTFS(gtfs_url):
    gtfs = [ # list of gtfs files and their locations
        os.path.join(dir, &#39;agency.txt&#39;),
        os.path.join(dir, &#39;calendar.txt&#39;),
        os.path.join(dir, &#39;calendar_dates.txt&#39;),
        os.path.join(dir, &#39;routes.txt&#39;),
        os.path.join(dir, &#39;shapes.txt&#39;),
        os.path.join(dir, &#39;stop_times.txt&#39;),
        os.path.join(dir, &#39;stops.txt&#39;),
        os.path.join(dir, &#39;transfers.txt&#39;),
        os.path.join(dir, &#39;trips.txt&#39;),
    ]
    for file in gtfs: # delete gtfs files before fetching
        if os.path.exists(file):
            os.remove(file)

    print(&#39;FETCHING GTFS...&#39;)


    zipresp = urlopen(gtfs_url) # Create a new file on the hard drive
    tempzip = open(&quot;google_transit.zip&quot;, &quot;wb&quot;) # Write the contents of the downloaded file into the new file
    tempzip.write(zipresp.read()) # Close the newly-created file
    tempzip.close() # Re-open the newly-created file with ZipFile()

    # Extract its contents into &lt;extraction_path&gt; *note that extractall will automatically create the path
    zf = zipfile.ZipFile(&quot;google_transit.zip&quot;) 
    zf.extractall(dir) # close the ZipFile instance
    zf.close()
    os.remove(fr&quot;{dir}/google_transit.zip&quot;)

    print(&#39;FETCH COMPLETE!&#39;)</code></pre></div>
<p><strong>GTFS-RT fetch</strong></p>
<p>There are 2 different files when it comes to the GTFS-RT that you will be interested in:</p>
<ul>
<li>Trips</li>
<li>Vehicles</li>
</ul>
<p>The trips data issues out information about the realtime associated with each trip that is currently in service. You can link up the information in the static GTFS from the trips.txt file using the trip<em>id column (and then the routes and shapes and stop</em>times so on and so forth).</p>
<p>The Vehicles data issue out information about the realtime locations of all of the buses.</p>
<p>For more information you can reference the <a href="https://developers.google.com/transit/gtfs-realtime">GTFS-Realtime Specification</a>.</p>
<p>When you fetch out each of the datasets you are going to need to use the pip module in the <a href="https://pypi.org/project/google/">google library</a> <code class="language-text">google.transit.gtfs_realtime_pb2</code>. What I have done is put together a little function to the the Protocol Buffer infromation that the feed gives off and then parse it to a string and then to a dict. </p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">    def parseDict(pbu):
        # TAKES THE DATA FROM U (THE PB URL) AND TURNS IT INTO A DICTIONARY
        feed = gtfs_realtime_pb2.FeedMessage()
        response = requests.get(pbu)
        feed.ParseFromString(response.content)
        feed = MessageToDict(feed)
        return feed</code></pre></div>
<p>After you have a dictionary you can then inject data from the GTFS or where ever to the vehicles and trips information. I am not going to go over all of this, but you can take a look at my <a href="https://github.com/AvidDabbler/GTFSRT-parsing">GTFSRT-parsing Repo</a> for mor in depth workthrough. From there what I did what convert the dict to a <a href="https://geojson.org/">geojson format</a> by just creating a blank object labeled as a feature collection and within that feature collection there is a feature that has features. With each feature you need to create and inject data into the four different sections:</p>
<ul>
<li>type</li>
<li>properties</li>
<li>geometry</li>
<li>data</li>
</ul>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">        allVehicles = {}
        allVehicles[&#39;type&#39;] = {}
        allVehicles[&#39;type&#39;] = &#39;Feature Collection&#39;
        allVehicles[&#39;features&#39;] = []

 feed = parseDict(pburl)
        id = 0
        for value in feed[&#39;entity&#39;]:
            obj = {}

            # LIST OF SECTIONS
            list = [&quot;type&quot;, &quot;properties&quot;, &quot;geometry&quot;, &quot;data&quot;]
            for i in list: # CREATE SECTIONS
                obj[i] = {}
            obj[&quot;type&quot;] = &quot;Feature&quot;

            # START OF DATA SECTION
            tripId = value[&quot;vehicle&quot;][&quot;trip&quot;][&quot;tripId&quot;]
            uni = obj[&quot;data&quot;]
            uni[&quot;vehicleId&quot;] = value[&quot;vehicle&quot;][&quot;vehicle&quot;][&quot;id&quot;]
            uni[&quot;tripId&quot;] = tripId
            uni[&quot;routeId&quot;] = value[&quot;vehicle&quot;][&quot;trip&quot;][&quot;routeId&quot;]
            uni[&quot;coordinates&quot;] = [value[&quot;vehicle&quot;][&quot;position&quot;][&quot;longitude&quot;], value[&quot;vehicle&quot;][&quot;position&quot;][&quot;latitude&quot;]]

            # START OF GEOMETRY SECTION
            obj[&quot;geometry&quot;][&quot;type&quot;] = &quot;Point&quot;
            obj[&quot;geometry&quot;][&quot;coordinates&quot;] = uni[&quot;coordinates&quot;]


            # START OF PROPERTIES SECTION
            obj[&quot;properties&quot;] = {}
            obj[&quot;properties&quot;][&#39;id&#39;] = id

            # ADD INDIVIDUAL VEHICLES TO LIST
            id += 1
            allVehicles[&#39;features&#39;].append(obj)
        allVehicles = addVehicleInfo(allVehicles)
        allVehicles = addVehiclePopups(allVehicles)
        return allVehicles</code></pre></div>
<p>Once you have this up and running you are going to save it locally and have it update at whatever rate you want the data to update with <code class="language-text">time.sleep(x)</code> then host.</p>
<h3>SOURCES!!!</h3>
<p>FULL REPO —> <a href="https://github.com/AvidDabbler/GTFSRT-parsing">https://github.com/AvidDabbler/GTFSRT-parsing</a></p>
<p>Special thanks to Gavin Rehkemper @ <a href="https://www.esri.com">ESRI</a>
Twitter —> <a href="https://twitter.com/gavinrehkemper">@GavinRehkemper</a>
Blog —> <a href="https://gavinr.com/protocol-buffers-protobuf-browser/">https://gavinr.com/protocol-buffers-protobuf-browser/</a></p>
<p>OpenMobilityData.org —> <a href="https://openmobilitydata.org/">https://openmobilitydata.org/</a></p></section><hr style="margin-bottom:1.75rem"/><footer><div style="display:flex;margin-bottom:4.375rem"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden;display:inline-block;width:50px;height:50px;margin-right:0.875rem;margin-bottom:0;min-width:50px;border-radius:100%"><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAIAAAAf7rriAAAACXBIWXMAAC4jAAAuIwF4pT92AAAEJklEQVQ4y12NaVNaBxiF709qO8l0Mk1HG602WqsNqVTH3VijETBGExUbZRNUEEPBBRRRqlAQLorKIMYVxX1BdgFZVBTcMHJBFKip0471+XTeM/OcFwjfIfIvd/MNoVAo8n+CwaDn5AwIh0L3zOvr69szAEEHewcBf+Bu+d/05NwEcG/y9ol6Q0NCY1/AsrKTMyoR6GnFbCQcuSc7du3Aidv16cJ3feOEQ1dXwZt2a0tfllvMRKGYpa9fxSXAv42Dx6RQcI2Qz3e77vP7L6+CNwbgsazvmjaNOq1Jr921GjWrS7DYJDGp6WJeuS+Tb7R38Mrfdpaj47/6RjIw+M/biGPfxeG1qRYngLBHG3JrzqzL2+tz586tFkxt2pN428cJz9yCUz61PTRuEsudwxPNJWWEGizkDx4fHZl1q5xO7M/PvgQCjhWfQ3VmVZ2YVUc76gwYHFNQ5JyZH6S2TtJZJt6gjNzGriZ8KEHhK9EWo8mgkvDYZYwPSCouDfCo2KernMNlrndLaFGJ8KjXOOQbRgU6OzYBmZDUU1ae+jg66ouHz6LiSZVvNLNcJqWwg5Rd9zaBRvgVWFLwt2bA7QXpztLgsUGuYTO7Kt8rWSwpvkGMJw9gmzDZxdRCVE1OAa3w5ZoADxLzlPwK4u+JZEwqwOf3d/cKOFyRUCjaWFSYhwRgdZ19RKHvEuq6+hwixZ/I6jEsjVVaI6FQzg3TTHw+EpHS2ozjthMBxXAvONAjFnJHJQLDonR/fQxsaNzk8tfI9HE0rgNRXhKbSIXnUAuRxrnBC5tSwHjfxqBPSsWE2lzAtNxnV0ts64JNJXdXDRpUolUZb5XDHcFguIiKluQc1Hc/lfzwPa2qcmVW7tiYFLfUDvO6lFIhn/YOkAvqbQudXj3otwxBNumRDlRPimfYvXJivYpCpqcVNKTlouFwDpUkFEtlkhE+GT/xV7tlvl871glMD/QcLg8erUkutKDfAEKmIadBN8Xu4WJwMgp9FNvY/BvqdU7msV7q1o8ZVXIelaAeLj6YzSfXPgHGu6njfaRFQeNHVvWyiH5o0Z1ehJeEIAPxqgSWlhmbmPIohkVo2BhlzXJxYx211flZ1JoHhLqopPSHwBD1pZBaJWoqXxTUazRWpzvshSJ7e6cCApmQnl6UBKtLz++uYXCa2YiYr4vjo5HPYb+kPn0Kj4n98QEw8gdhQQYadZbzQGTXfWV1+l2eSy8UtjrPpC1d/ApML/IdE9tmsAXbG2lFyUkJ0Y/i4h9nZMFz8woBq+XgBIq4TkK2/UvTjs+6G3C4Lp0uyO6+WlNq+iswHARaKlJprZdGe2hlw9XU1JqV+YJEZDJZUuDYe73nDux7Pjtas89s9+/sfc4WB2TZ8YJNnWKGaEV7rtv+pNZ7dWbI4YpMqbariJV5pel/A90MJOWm6Kf9AAAAAElFTkSuQmCC" alt="Walter Jenkins" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms;border-radius:50%"/><noscript><picture><source srcset="/static/5b9b48cca521068548e2866eb7a31c47/8ba1e/profile_small.png 1x,
/static/5b9b48cca521068548e2866eb7a31c47/f937a/profile_small.png 1.5x,
/static/5b9b48cca521068548e2866eb7a31c47/71eb7/profile_small.png 2x" /><img loading="lazy" width="50" height="50" srcset="/static/5b9b48cca521068548e2866eb7a31c47/8ba1e/profile_small.png 1x,
/static/5b9b48cca521068548e2866eb7a31c47/f937a/profile_small.png 1.5x,
/static/5b9b48cca521068548e2866eb7a31c47/71eb7/profile_small.png 2x" src="/static/5b9b48cca521068548e2866eb7a31c47/8ba1e/profile_small.png" alt="Walter Jenkins" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><p>Written by <strong>Walter Jenkins</strong> who lives and works in Saint Louis. His passions are Civic Tech, Smart Cities and Alternative Transportation. He specializes in working with data analysis and visualization through maps. <br/> <a href="https://twitter.com/aviddabbler">You should follow him on Twitter.</a></p></div></footer></article><nav><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0"><li><a rel="prev" href="/190915-UGH-I-Broke-My-Pi/">← <!-- -->Ugh!!! I Broke My Pi</a></li><li><a rel="next" href="/200511-Stop-Using-American-FactFinder/">Stop Using American FactFinder<!-- --> →</a></li></ul></nav></main><footer>© <!-- -->2020<!-- -->, Built with<!-- --> <a href="https://www.gatsbyjs.org">Gatsby</a></footer></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/200512-Two-Ways-to-Vizualize-Realtime-Bus-Locations/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-b28b59c8508f5cd2545d.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-e20d661cfc9de7014e2a.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-48f3806a20e7fba707fc.js"],"component---src-pages-404-js":["/component---src-pages-404-js-c4e21bec9f8bea5f494e.js"],"component---src-pages-index-js":["/component---src-pages-index-js-150346ec4038d88dd771.js"]};/*]]>*/</script><script src="/component---src-templates-blog-post-js-48f3806a20e7fba707fc.js" async=""></script><script src="/commons-bf1a251c391231b74368.js" async=""></script><script src="/app-b28b59c8508f5cd2545d.js" async=""></script><script src="/styles-47650936bd9d421e990d.js" async=""></script><script src="/webpack-runtime-8f2e3488a851bf2bc4b3.js" async=""></script></body></html>
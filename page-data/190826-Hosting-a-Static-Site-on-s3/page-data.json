{"componentChunkName":"component---src-templates-blog-post-js","path":"/190826-Hosting-a-Static-Site-on-s3/","result":{"data":{"site":{"siteMetadata":{"title":"AvidDabbler Blog","author":"Walter Jenkins"}},"markdownRemark":{"id":"488c98ae-dbf9-5e75-b5ea-7bbb7077445d","excerpt":"Intro As I expressed in my last post, there were a number of different options that AWS offers to get up and running on a budget when hosting a static website…","html":"<h1>Intro</h1>\n<p>As I expressed in my last post, there were a number of different options that AWS offers to get up and running on a budget when hosting a static website, but at the end of the day I will be going the S3 / Cloudfront way of hosting and routing. This post will go through the following steps in a logical way:</p>\n<ul>\n<li>Hosting your files through AWS S3.</li>\n<li>Connecting your files to be accessible through url via Cloudfront.</li>\n<li>Use CodeBuild to connect your files to a GitHub Repo.</li>\n<li>Configure a custom domain to your project.</li>\n</ul>\n<blockquote>\n<h2><em>MAKE SURE THAT YOU ARE CREATING THESE ALL WITHIN THE SAME REGION.</em></h2>\n</blockquote>\n<h2>Set Up Your S3 Bucket</h2>\n<p>So the first thing that you need to know about setting up your website is where you need to store these files. <a href=\"https://s3.console.aws.amazon.com/s3\">S3</a> is the most common way to store file on AWS securely. Think of S3 as your secure Dropbbox. Or that Dropbox is using S3? Anyway, S3 is going to be where you are going to be storing all of your static website files. In this section we are just going to focus on getting the bucket made public. You wont need to worry about getting anything moved over into the bucket as we will configure it to sync with your GitHub in the next section. </p>\n<ol>\n<li>Go to your AWS Console and go to the S3 section of AWS</li>\n<li>create bucket with website name minus <em>www</em></li>\n<li>Go inside the bucket and the make public by going to the permissions tab and then click the <em>Block Public Access</em> button then click edit and turn them all off. Then save.</li>\n<li>In the same permissions tab click the <em>Bucket Policy</em> button. Then paste the following rule in the code editor and configuring it for the bucket that you just created.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">{\n    &quot;Version&quot;: &quot;2012-10-17&quot;,\n    &quot;Statement&quot;: [\n        {\n            &quot;Sid&quot;: &quot;PublicReadGetObject&quot;,\n            &quot;Effect&quot;: &quot;Allow&quot;,\n            &quot;Principal&quot;: &quot;*&quot;,\n            &quot;Action&quot;: [\n                &quot;s3:GetObject&quot;\n            ],\n            &quot;Resource&quot;: [\n                &quot;arn:aws:s3:::example-bucket/*&quot;\n            ]\n        }\n    ]\n}</code></pre></div>\n<ol start=\"5\">\n<li>In that same window go to the properties tab and then click <em>Static Website Hosting</em>. Click <em>Use this Bucket to Host a Website</em> set the index document to <em>index.html</em> or whatever you set it up as in your static site. Click Save.</li>\n</ol>\n<h2>Create CodePipeline</h2>\n<p>Now, we need some file to host. These files have to come from somewhere. Sure you could have just uploaded some files to your S3 and called it a night, but you want to put the work in you want to be able to just forget that you have to do that. You need <a href=\"https://aws.amazon.com/codepipeline/\">CodePipeline</a>. CodePipeline is a great way to work with your code from a project that you want to host somewhere on GitHub, but also store for hosting on AWS. What this next section will do is help you manage the connection between your GitHub branch and your S3 so that whenever you make a change to your specified branch it will push out an update to your S3 bucket where you have your website files hosted. </p>\n<h2>Choose Pipeline Settings</h2>\n<ol>\n<li>Name the pipeline after your bucket for simplicity.</li>\n<li>new service role</li>\n<li>Advanced settings:</li>\n<li>Custom Location (Select the S3 bucket that you want to connect to as they need to be in the same location.)</li>\n<li>Default AWS Managed Key</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/760b42c8fa231490a544a1bf9ea42061/bcb8c/pipeline1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 97.83845278725826%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABYlAAAWJQFJUiTwAAAC5klEQVQ4y31UyW4bMRTz/39Iz+05RXpqCgS9pgmaxFvsGY9nk2bfWVJeEgdJDRDSyNITHx+fZt4uQLDfI0oSJGmKbRBi7YcIwtiN/j7GZhdht4/g7XbYeD72UYQ4Sd2Z+B1md/f32HKTzTIUZYnN1sPj8wLP84Ubn57nePj7iChOkHGPsRZZnn+KmR8EjpkCaiHhLS/rNRbLJSIyqaoKRVGgrmu0bYumaVAL/D5BayKjGLPdMd1TwJwIGUhj13VntO0BXddjHMcLTNPkLhH7WRCGlwHJZut52DJ1bSjJsOTtDpzXdYN+GBze/hqydwEldPwmoNKLU8MUKjRkM3HzOB0wTRcxHLPpuNicGCbGuPSs2DFoVNR42Bk8eiE2poKft4iaEXELZO2AlJd7/oFE6fQtnRSaG2koVmKngKpiTmZRViBvOpiyRsx5WlRutDysIrXSlOj7Hl1/0PSs4SnV0yh4tJFHHW9vb3Fz8xPfr67w7etXXF9fw6dEwzB+ruFrQAWjz/IK662PMIzcBqWUH7U9QfvFaKR+w/sqn5kp7ezAMKUv5c2E3aDqVvSaUi0/gf6TO5wP36fsfEgrxXHsIDMPsgm1GohpHJxmWhuOayPnVX0sylvtNNeNqqBYSniJLn1kbtv08E0JP6UbygYpv9O6h2H1c/rTZvYyoDTQYctxtX5hAQ4PRyJfyp9Vh3lAS20CLPcpVqHFNimwLxmYjsg+YqielB4SuXK92rh0VdW2Z2oDC0BU/ehGgTZFyf3W2o8CFu6BMMa6oPoN1E2aSavJVXV0lxz75f+2SWhidckq4PuXWARZ6bQyzYCSragLdTBlh+nCw4PRukpfFOXQKdxYt3gOUvxZbPC0DTHfxVjtDTy2oW17V/ml9OWzl1Jb6Vt2lKAb3jE8eZH6JTSzmFrqZ6rGtWDKllTrSd+McO+k9CaK+W9kmwdY7rkw9nk8QjawF9+v0HdItiFfcvPrC8zdD2R1h38B3fyTwUK8vgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"choose pipeline settings\"\n        title=\"choose pipeline settings\"\n        src=\"/static/760b42c8fa231490a544a1bf9ea42061/fcda8/pipeline1.png\"\n        srcset=\"/static/760b42c8fa231490a544a1bf9ea42061/12f09/pipeline1.png 148w,\n/static/760b42c8fa231490a544a1bf9ea42061/e4a3f/pipeline1.png 295w,\n/static/760b42c8fa231490a544a1bf9ea42061/fcda8/pipeline1.png 590w,\n/static/760b42c8fa231490a544a1bf9ea42061/bcb8c/pipeline1.png 879w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3>Add Source Stage</h3>\n<ol start=\"4\">\n<li>Click Next</li>\n<li>Set your source provider to GitHub</li>\n<li>Allow AWS to access GitHub</li>\n<li>Select the Repository and Branch that you are wanting to publish.</li>\n<li>Select ‘Use GitHub Webhooks’</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/547b2b34a6952cfe9846b5ca910498f4/84bf8/pipeline2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.99827882960413%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB2UlEQVQ4y41U7Y6bMBDM+79H36K/+wJtT6raqndKCAEDNhiD+ZzuLCF3qXJtLY3WeGE8O7vJIYSAylpY5xTee6SmxPM5R5oXGrPS4lI6lFWFzBgUEht5r26aO7TCdRjHEZc8VxRlCd+2OCUJvv/4iZfjUeMjAj6/hRK2QjiMgxIcTydVuicrIeFl8zxjmkbd/w1URzGHYRiQFwWMqNtvZ8KYQspvESXfx3iHeI38llhX6BntUkKWS0JX16pwJ3TiKS+gzyQnWskx71yte+b6vkcnuCmk2bsvmxctyrKCEeV8cSt7wiila5QSB+KqkM93hDcyz5JFYdcg9xcYlyF3F+nwGVmVIrMpLhJtEHt6i2WdsS9a8JBwi7WMTgLbVLBe1AcZp765IQxSevSYl1n9e5dwLzl0HepazkQtEeNm/LKsN0wTyVbFPwmZqKVBVMDFj5ZlecW6qpfL/xA23EvinHHYjcymkxnrxPSIjuPCjkoFnDs2a1urnj/wcCO0IeIpKfHlV4KvLym+JQZHG1D0szYtOac6GSQhFqHshul1Dv8suZHb6y7Ctr3CcR96PeN4hKvC7dcR0OXP8OYEL5XcE76ZxeYdMMc/Ec4oVeZFherTB7jPH9EOM34DTXw1DzO/xOMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Add Source Stage\"\n        title=\"Add Source Stage\"\n        src=\"/static/547b2b34a6952cfe9846b5ca910498f4/fcda8/pipeline2.png\"\n        srcset=\"/static/547b2b34a6952cfe9846b5ca910498f4/12f09/pipeline2.png 148w,\n/static/547b2b34a6952cfe9846b5ca910498f4/e4a3f/pipeline2.png 295w,\n/static/547b2b34a6952cfe9846b5ca910498f4/fcda8/pipeline2.png 590w,\n/static/547b2b34a6952cfe9846b5ca910498f4/efc66/pipeline2.png 885w,\n/static/547b2b34a6952cfe9846b5ca910498f4/84bf8/pipeline2.png 1162w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ol start=\"9\">\n<li>Click Next</li>\n</ol>\n<h3>OPTIONAL: Add Build Stage</h3>\n<p>If your site is just static files you can just skip build stage, but if it in React or Gatsby you will need to add the build script in here</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2878fc7845ab4be7ee1b7c7c662610b9/f79fa/pipeline3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34.787234042553195%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABC0lEQVQoz32RWXKEMAxEuf8xcoocIAfIf4qZTKoGMF5ZjMEsHckEslRlPrpAlvWklrMYI6xz0MbAWIumbaGtw/UuUAiJj6JGpQyEdlDGopYSUql076/arkO2rmsCSa0TlBOKCt7yHPnlksT5ru9TwSNxbbZtGxTB7mVJk9kzyVAhBIZhwLosYCfzPP9SnOPXeUQI4RvINt5vt2SFYTwNN7Fk3fsBnqD87f1wxr33GAgSwng2cwxcCchWa4K5pkldGLhPMGOaIqa4iwuPOIwj/U/p3rICcdn2CReyw4/COvbwn9iBpoepRE0ODEpaUyEt9Osz7MsTWh8ISI/yc6mPFn44OHTGRqJRVbr3CdqTGAC3E2eWAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"build stage\"\n        title=\"build stage\"\n        src=\"/static/2878fc7845ab4be7ee1b7c7c662610b9/fcda8/pipeline3.png\"\n        srcset=\"/static/2878fc7845ab4be7ee1b7c7c662610b9/12f09/pipeline3.png 148w,\n/static/2878fc7845ab4be7ee1b7c7c662610b9/e4a3f/pipeline3.png 295w,\n/static/2878fc7845ab4be7ee1b7c7c662610b9/fcda8/pipeline3.png 590w,\n/static/2878fc7845ab4be7ee1b7c7c662610b9/efc66/pipeline3.png 885w,\n/static/2878fc7845ab4be7ee1b7c7c662610b9/f79fa/pipeline3.png 940w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3>Add Deploy Stage</h3>\n<ol start=\"10\">\n<li>Set Deploy provider to Amazon S3. Then select the bucket where you want your site to be located in.</li>\n<li>Select extract files before deploy - This will allow for your files to be hosted in a readable format instead of all zipped up in a single file.</li>\n<li>Next</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/80e2c864168057b33f8f2d97c6d2cae9/8cae4/pipeline4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 73.76014427412083%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB+0lEQVQ4y42UaW7bMBCFff9r9CD91wsEQQHDjm05tkVtFBdLsha/zqOkgGnaogIeOFr4zeMMqU1tDPKyRKk1dF3DOofkluHwnuKSZniTURUlrrlGWVVQWYYsz2GshY3lbJi70QLM8gKFfEwgPzwmCba7PXbHBPvDEaqs4JoGtbvD+EZ0h7b+kyrjUMvcDSGpZGV2wpxk2RYtXpIcPw9nvO7P2J5TJHmNc2FwynSIL5XDVfswUpnvoSVhAN6UCg4JpFLb4ZQb7N4V9hdZ9q3AIS1xVBUOEnNUtkXmumUU+QcqcbqppHbHU4LL9QrW03mPopASSN3GaUI/DEGPvg/q+znuHg903ay269C07VJDccim8CYsWYCGjZLCe6nVQGAAfdX6bhxHTJKcczcrKAbS6S1V8Pf7nL1pg4OgJea7uzSKTsdxAi8+C8BVsUM6Z8zlPZ9PTJF4TwidrReffQBjhxwJohpxwJpxOWMk3g8CW4HPJclfgZ6NkbpSBHPisGhcxEaxhv8FtAIJYPmAit2NEZROCfrnkrmxte+khgalOOS2YiNaaQS3SFS02dkaT2NY2R8dsotsitazhsXN6ih2hQVKeUn8Cfh7vIp1DMuXfbk2bD73Zj7D6Qn2xzcYdfoKtMvxM279g9iPIxmrXH4mRVWjUheY1+8wxQ2/AGqZgbJNPf/qAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Add deploy stage\"\n        title=\"Add deploy stage\"\n        src=\"/static/80e2c864168057b33f8f2d97c6d2cae9/fcda8/pipeline4.png\"\n        srcset=\"/static/80e2c864168057b33f8f2d97c6d2cae9/12f09/pipeline4.png 148w,\n/static/80e2c864168057b33f8f2d97c6d2cae9/e4a3f/pipeline4.png 295w,\n/static/80e2c864168057b33f8f2d97c6d2cae9/fcda8/pipeline4.png 590w,\n/static/80e2c864168057b33f8f2d97c6d2cae9/efc66/pipeline4.png 885w,\n/static/80e2c864168057b33f8f2d97c6d2cae9/8cae4/pipeline4.png 1109w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ol start=\"13\">\n<li>Review the changes and Create Pipeline</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/27e6fd054d28c13d603f7c8dea8becc5/7762d/pipeline5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 137.59630200308166%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAcCAYAAABh2p9gAAAACXBIWXMAABYlAAAWJQFJUiTwAAACdUlEQVRIx61VybLTMBDM1/MJnPgNrhS5J4dQFMUBXki8L7IsO3bsbMP0xAm2Yz1eKFzVpTiSe0Y9PdKsqipSWUa5MaQZRVmS0ob8RFPKY5hqQaw0JVlOqVIUJQml/A3WmqIYYLZjwiCKZFGSplTudvL+9dt3ivm94HdTlILcFPfA+A3CMYQw7iJiMQiRhed7FDJxEIbkep6suWdUFg+ZDTIM45gSJsmLa1Sd5+T7PjmuS57nU56zFDy33++ptgBzVV3TDBpiayAEEaJIlqmiJGEJOMDlcqHz+Uyn08kKzB8Oh2uGyERpfU8bhAlkYNJnHhALITS7iSqEPEasn+8HZFj8mrci2+URwIfycObX4fKHEPvuVwmECAJSw0VaLpc0n89psVjQarVifJH/b0Q3DAhNVwzTKwqQd75EABG+aQSQZMoyYpsHwl0pEvzabAQ/fr6IdbAOWYMMASbBcwPCfpYpVz5mO8GL2CK2czwerTidjtS27TQhslCcZRjFXIxmIPzUY9WwnyFIG46IqH3xbXiVEFqhM2DUcTX/mTDi7aKL/hshbHN+RbepB+036UMZe0Gwpu51yiTuh8OIUPqYLbN1HDm2to4rB3A/4AN6309uGQjDSOC6nvQzvIaKo1A2NNxFVh/qTPOCdiD60z7sj6nK7n38VpTj1htruNlu6WW9lo653i3FX2HVMAgC0RBXAU5uaNR2nWMD2tSqoeluNczDX+fuGrABOqJwll4uSOu8W3x5U7fg9MaJY+0UxUWBYZ/qFIb1tIGZUWlU73ZSj1HX3TWqfNrHa6oSx24b6FhaKotLHwH98HqRqc8fSH98R/rTe/oNEGdxhhO0esgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"review the changes and click next\"\n        title=\"review the changes and click next\"\n        src=\"/static/27e6fd054d28c13d603f7c8dea8becc5/fcda8/pipeline5.png\"\n        srcset=\"/static/27e6fd054d28c13d603f7c8dea8becc5/12f09/pipeline5.png 148w,\n/static/27e6fd054d28c13d603f7c8dea8becc5/e4a3f/pipeline5.png 295w,\n/static/27e6fd054d28c13d603f7c8dea8becc5/fcda8/pipeline5.png 590w,\n/static/27e6fd054d28c13d603f7c8dea8becc5/7762d/pipeline5.png 649w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ol start=\"14\">\n<li>Once the pipeline has finished syncing go to the management console and head back over to your S3 bucket. When you click on your bucket you should see all the files that you were already hosting in GitHub, but in your S3 bucket. So now if you make a change to your GitHub they will be reflected in your bucket. Feel free to test this out by making some changes to your readMe.md file and then check your readMe.md</li>\n</ol>\n<h2>Set up CloundFront to connect to S3 Bucket Part I</h2>\n<p>So now that we have the place where we are going to store your data setup and have figured out how to make sure changes are easily pushed to the S3 bucket. We need to figure out how we are going to how we are going to securely route to those files via URL. We are going to be using an AWS service called <a href=\"https://aws.amazon.com/cloudfront/\">CloudFront</a>. What this service allows you to do is route via a CloudFront URL to your S3 bucket. So there will be a CloudFront URL associated with you site, but we will be using that information to reroute to your own custom domain in the future. </p>\n<p><strong>A quick note. During this section we will be creating a new certificate in this section that will take you between CloudFront and Certificate Manager. Do not close the CloudFront tab otherwise you will have to start over.</strong></p>\n<ol>\n<li>In the Management Console navigate to the the CloudFront service. On the main page in the top left click ‘Create Distribution’. From there you will click ‘Get Started’ under the web section. </li>\n<li>Origin Domain Name: select our bucket that you are now hosting your site files in the dropdown.</li>\n<li>Origin Path: leave this blank</li>\n<li>Origin ID: by default, this field will be auto-generated by CloudFront, you can custom it as you want</li>\n<li>Restrict Bucket Access: Yes</li>\n<li>Origin Access Identity: Create a New Identity</li>\n<li>Grant Read Permissions on Bucket: Yes, Update Bucket Policy</li>\n<li>Comment: www.walterkjenkins.com-cloudfront</li>\n<li>Alternative CNAME type in your domain with and without the www at the front of your address</li>\n</ol>\n<p><a href=\"/56a9128254ec9b05ef8b6d8a05cc7aa5/cloudfront1.png\">S3 Bucket Setup part 1</a></p>\n<h2>Set up AWS Certificate Manager</h2>\n<ol>\n<li>Go to Certificate Manager in the AWS console</li>\n<li>Type in the domain name that you have purchased with and without www at the beginning.</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e6866a604d7fbff47d8d604280dfad90/fe8a7/certificate-manager1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.31888798037612%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAABhklEQVQ4y42SCXKDMAxFc/+z9CY9RNOmYTHYwQsGDPhXMtCFgU4880Yisb+/ZF3maYK1Fs45tG2b4jzPOFvxhDlGROIyhh5K1qjrGkopDENA4wPu0iKTBrlyPzw8iqZFqZe45cJ0UH7GOJPgRA611vC+Szcwqg24Co134qNa4rVs8CYcbo8epQ0Q34wQjmhXQRbgErcyk6AbcCdH2epKmD5R2QGFnSB9hB6AZkUHoCLRYZxw+dOfGFNkxxW1oKpqGGOpDQP6fqXrqBqPlvArHf1mjEEIYXH4G178SHmeoyhylEWR8jzLkBF8Gf9vSYBFjDbQTZNEeV327rZYCoGP2yfUo4EhAU1OpZQYx/F8AviVjwQ5LWWDWy4gtYPxA0wX0NMELEOyDNC+Oj536lApmUoV5JQjjxT3iMeKhdkpTwjDeZwnPnzmMKZNLLDBD7PhexZcxHg6OLqe853gBr8cNzw1n+Dv//rWktjLK7XHhXOHz3C0/3AOz5wciu7OPO1wf+GW7vd9AVNPR1RbcrpsAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"enter in your domains\"\n        title=\"enter in your domains\"\n        src=\"/static/e6866a604d7fbff47d8d604280dfad90/fcda8/certificate-manager1.png\"\n        srcset=\"/static/e6866a604d7fbff47d8d604280dfad90/12f09/certificate-manager1.png 148w,\n/static/e6866a604d7fbff47d8d604280dfad90/e4a3f/certificate-manager1.png 295w,\n/static/e6866a604d7fbff47d8d604280dfad90/fcda8/certificate-manager1.png 590w,\n/static/e6866a604d7fbff47d8d604280dfad90/efc66/certificate-manager1.png 885w,\n/static/e6866a604d7fbff47d8d604280dfad90/c83ae/certificate-manager1.png 1180w,\n/static/e6866a604d7fbff47d8d604280dfad90/fe8a7/certificate-manager1.png 1223w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ol start=\"3\">\n<li>Set up for DNS Validation then click review</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/924e4d995d57d5bd513c73c64f7a8a9d/b9024/certificate-manager2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 45.38653366583541%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABEUlEQVQoz5VSC27FIAzj/sfYXXaHnaCdoKX0AwUKeEn0OrFNb9oiWfyCYwdUrRWH9/A+CI7jQCkFvH/jP6FyOmGsg7Yrls2jEtm2bZimSTDPMxXyUuS6LuScn4KLqxR2GKNxnidtFKninMM4jjDaYBgGmTO01liWRcA5/ZzBRVWtDTFGqcDRWhOEEOAomc8aVWZ1DM7n874lvP603Pu/yTgiKWa7omCn/oZI5Kc4+Y6UEtrjvrpJbqJ75ERjDPZ9R8oXXcqksJCt+kUd2xQ8lKteXT+yVSZkhSv1x1oLux70I4K0g8EuIqnj3B+We8K+J79Fuho8fbOJfsnL6zveBv+c8C/gByr0UIkedHQJPhZ8ACS1wG6P6/H1AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"DNS validation\"\n        title=\"DNS validation\"\n        src=\"/static/924e4d995d57d5bd513c73c64f7a8a9d/fcda8/certificate-manager2.png\"\n        srcset=\"/static/924e4d995d57d5bd513c73c64f7a8a9d/12f09/certificate-manager2.png 148w,\n/static/924e4d995d57d5bd513c73c64f7a8a9d/e4a3f/certificate-manager2.png 295w,\n/static/924e4d995d57d5bd513c73c64f7a8a9d/fcda8/certificate-manager2.png 590w,\n/static/924e4d995d57d5bd513c73c64f7a8a9d/efc66/certificate-manager2.png 885w,\n/static/924e4d995d57d5bd513c73c64f7a8a9d/c83ae/certificate-manager2.png 1180w,\n/static/924e4d995d57d5bd513c73c64f7a8a9d/b9024/certificate-manager2.png 1203w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ol start=\"4\">\n<li>Click Confirm and request</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f19000a199bd0c0c80525a0b2b21012e/20f89/certificate-manager3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.131079967023915%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABBklEQVQoz52Sa27DIBCEff9T9Cb90Tv0Bq1qpTYxBsx7uku7FnGUKM1KIwxih+HDQykFqzEw1sKSDH3HGMHrXLXWXY/UkFLGqCy+ZofT4hFprpcFel33TWLWm9/SkKLHNE2UzIL7eNFR0lkpbNvW0qaU2phz3o35Br2RzIfanSybuTGE0MSmK6VlFM65Zn43IQ5shJ0UJxvHEWfCoNQMrfXVnguGxxO4OA1j4GScVlI/wnLowUuD974lsX8vb61p5pz2aFAav19dGfajFDMTfvIox56LKz/za/RGIVWYUGFJudT/G/IjxlRgHGE5T3h9/8bL22fTh/K3De/Vzo4Q5FyQaGTx2g9ai2Mus4KdfAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"request a certificate\"\n        title=\"request a certificate\"\n        src=\"/static/f19000a199bd0c0c80525a0b2b21012e/fcda8/certificate-manager3.png\"\n        srcset=\"/static/f19000a199bd0c0c80525a0b2b21012e/12f09/certificate-manager3.png 148w,\n/static/f19000a199bd0c0c80525a0b2b21012e/e4a3f/certificate-manager3.png 295w,\n/static/f19000a199bd0c0c80525a0b2b21012e/fcda8/certificate-manager3.png 590w,\n/static/f19000a199bd0c0c80525a0b2b21012e/efc66/certificate-manager3.png 885w,\n/static/f19000a199bd0c0c80525a0b2b21012e/c83ae/certificate-manager3.png 1180w,\n/static/f19000a199bd0c0c80525a0b2b21012e/20f89/certificate-manager3.png 1213w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ol start=\"5\">\n<li>Once you are on the validation page you are going to need to copy over the ‘Name’ and ‘Value’ text from the validation page over to the DNS area where you bought your domain. This information is important and should be kept confidential because this data is what verifies with aws that your domain is allowed to release the file that you are hosting to that domain that you purchased.</li>\n</ol>\n<p>I personally bought my domain from Google Domains, but basically just copy over that information Copy over CNAME data to domains.google.com</p>\n<p>It is important to note that this url will just be a blank page until you connect it to CloudFront.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cbacffcdb620c88007818f82bc46973c/38af3/certificate-manager4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 93.95973154362416%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABYlAAAWJQFJUiTwAAADC0lEQVQ4y3VUTXPUOhDcf8w/orhQxYkUCZBXwIEL3LgSoJKCbHbtzdqWLFmy/LlNz3izj5d6uKpLtjQz6pme8arrB9wbj9JFxOHwV7QjTnj8nSbAtQOMC1gNfY/t5g7ZdoMYGrQxcA36Hk7fDRrvCafQs8bD1Vb3xc5ao36rcRyw3++RZTk2my22WcbgGfI8x3a75X5GY4u6dkStzoGO8i5+su+c0z15VsMwqKMYxBj1oGkaeN78ANlLKaGqKmT5Dvf7gjYBbduqTzyuPbMlw1ENd7udQm71DCj7YiAl6boOHddQl3D7NXy5QWIQ3T9Cggu51TzPyqAsDcqi0rWuhRnTolDOL+wSnVIbkSQLso6xJUvJSNglTfdwOCwBpQZVlfMWQ6OSBZeUCrjoYCmC982pHP3Q0DERLeY5YpoC18Dvgesx4DRNePcux5s3Dd6/b/HhQ0ck/HOZ8PWrpzBrXpZQW4+LixwX5w6vX9d4+7ahX+R7wNVVLxyXgCLCr18Fvn/f4fbWUuXAIJFiRRjTqrILw4ifPyvcXBe4uSnV7v6+Y0ckZtmT5YyVsJOUYxQ1awa3sIbpukphbaWiGWNQsXFr1muaRzqPzKyjeEnXaZKU54XhQ0s49lSblgL/33Og8xwN5taqAP854/cpoDDc70sUgmJR2VoHU3MCnNeW0J6T1FmeRjI69WtQpWcGPKnsqaQxOZkaOhYKUds2DqX1Ol4PKnd9w35L7L2EvhOVF6VPKkshx3HCq1cZXrxo8PRph2fPOiqY8PlTRFUWuLu707IIc7F7+bLC2VmB83OLy8tI5SOur7t/VZbxEpWvqd56HYiGygWWYUlLsIxkwO264nnJSwoq7FmiRLvEs6PK2jb6B5EBt4RhTUteYgirM778HLj6iJr1GlVRqjz2zE4U7nXsJhFF0q2aAZ4/NhcX9OOscyx9F8NSO/0JEEJABD6oCMAjsReGw8Q6/gG56WGCHmMJeDi2yUHrtmNTf8tbVGFcAh476c+u+nsvHoMJpnmxO/tS4MnzH/h4ZfAbcgquCNS8ygoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"enter in your domains\"\n        title=\"enter in your domains\"\n        src=\"/static/cbacffcdb620c88007818f82bc46973c/fcda8/certificate-manager4.png\"\n        srcset=\"/static/cbacffcdb620c88007818f82bc46973c/12f09/certificate-manager4.png 148w,\n/static/cbacffcdb620c88007818f82bc46973c/e4a3f/certificate-manager4.png 295w,\n/static/cbacffcdb620c88007818f82bc46973c/fcda8/certificate-manager4.png 590w,\n/static/cbacffcdb620c88007818f82bc46973c/efc66/certificate-manager4.png 885w,\n/static/cbacffcdb620c88007818f82bc46973c/38af3/certificate-manager4.png 894w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>Set up CloundFront to connect to S3 Bucket Part II</h2>\n<ol>\n<li>When you get down to the SSL Certificate click custom SSL Certificate.</li>\n<li>Click the input box and if you successfully created your SSL Certificate you should see a drop down associated with your domain.</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/69459c49829aea6ea6c027c27e7898d0/7e509/cloudfront2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68.7248322147651%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB10lEQVQ4y4VU23aCMBDkh/sz7Tf1qc9WbiKKkgCKXEVEnO4upaVeTnPOHhOdTGYmG42lv4Tv+1BawXVdbLZbXK9X/DcYM+KmeON8PuN0OqHrOvB8l+yQ5zmKokAURVBKUWkprbWsD4cDOsJmWXZPOE6YNE1TATFZRqSaCFvaOB7K1TSNrLkY/5CQQayGa71eY0u2o1DBmZtQNGfF7OByuaCn4nFuWyRJ8sc+lxD2fS8b+IuM7CQ7sh3H0I4DRbnuaSP/zuPyTchYVsnipnkaU7l1XYuaPC9EdZblKMsKJUWQ7lOJgvPb03w84HYY0wxGpayCyWezGRzLhmlasEwblmXBtm2EYUjxxGKZY0rITRQPa2PaBtPBhFpHpGaPmMA/RURVVUkxhquqSlF/PB4Hy9N+GucFWQ+CQNQEwUYuarMJ6VPR7R4oinJoL4qHyYYOOP0qvFXK1hcLDwt3geXSh+d5pNgncrb+SWWL7fjb6qC0fk7IObICbnS+iCIv8foGvLyAXtSArcpaVN1dykNCUhhFw+sYKsbHh8b7e0zqNBHVguWD7/rwEWHTdnCDHSzHgzmfyzvXeiW2VytPDuH2un3PzxX2VzTUakeyxPm09DJuR9/f/0F8AYAsNw+0VyD0AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"setting up the SSL Certificate\"\n        title=\"setting up the SSL Certificate\"\n        src=\"/static/69459c49829aea6ea6c027c27e7898d0/fcda8/cloudfront2.png\"\n        srcset=\"/static/69459c49829aea6ea6c027c27e7898d0/12f09/cloudfront2.png 148w,\n/static/69459c49829aea6ea6c027c27e7898d0/e4a3f/cloudfront2.png 295w,\n/static/69459c49829aea6ea6c027c27e7898d0/fcda8/cloudfront2.png 590w,\n/static/69459c49829aea6ea6c027c27e7898d0/7e509/cloudfront2.png 745w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ol start=\"3\">\n<li>Set the Default Root Object: index.html</li>\n<li>Leave the rest filled default value</li>\n<li>Click Create Distribution</li>\n</ol>\n<h2>DNS Configuration</h2>\n<ol>\n<li>Through the management console go to Certificate manager and click on where the CNAME data is stored for your url.</li>\n<li>This information that is stored in the CNAME and Value fields in Certificate Manager is the information that you need in order to connect your domain provider to your AWS configurations.</li>\n<li>Go to go to where you purchased your domain and look for the DNS section.</li>\n<li>Copy and past the information that you have in your Certificate Management console over to your Domain provider. This will establish a connection. </li>\n<li>Once your Validation status reads ‘Success’ you know that what you have done has worked</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/922f140c1a5f5fd59113e353dd277a65/f96df/certificate-request1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.39104829210836%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA8UlEQVQY022Ry47CMAxF+9d8B1u+ii1Ifc2USZo2jzpJg2Bxx2kpqphZHDlyEt9ru5BSQgiBeU7MjJQSns+ZiXg8IuciQoiIcSWE8GbL7SlykXyYpglSCnSdwPU6oiwJTUNwzi9Ce7LoZ26j8N4vxcZxxDAIXC4jTieD49HicHA4nx07DSBaXeW3ztol7t1uFKrvUdcNeo4ZpRR/NvDeQGvDQjlqjhrGGDRfLcq6wq3rlvwey0IFEfHlN6qqRNs20Ox0ncfW3q5VRjiFgTTu6f5nfotDM3n8KAPByMHCUp4nvVTNWz27i7wcCgTy9O9CMr/jH8byCALCCgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"validation status\"\n        title=\"validation status\"\n        src=\"/static/922f140c1a5f5fd59113e353dd277a65/fcda8/certificate-request1.png\"\n        srcset=\"/static/922f140c1a5f5fd59113e353dd277a65/12f09/certificate-request1.png 148w,\n/static/922f140c1a5f5fd59113e353dd277a65/e4a3f/certificate-request1.png 295w,\n/static/922f140c1a5f5fd59113e353dd277a65/fcda8/certificate-request1.png 590w,\n/static/922f140c1a5f5fd59113e353dd277a65/f96df/certificate-request1.png 849w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><strong>It is important to be patient during this process. This may take a while and if you try to redo the certificate and copy back over the information the process will just start over.</strong></p>\n<ol start=\"6\">\n<li>Going back to AWS CloudFront. In the CloudFront Distributions page you will see where you have set up your site. Under domain name. There should be a URL that ends in ‘cloudfront.net’ follow that link. You should see your built site up and running.</li>\n</ol>\n<p><strong>If you do not see your site you are going to need to go back and check through your cloudfront configurations</strong></p>\n<ol start=\"7\">\n<li>If that works, then copy over that URL to where your domain hosts the DNS configuration info. Preform the same process as before when you were setting up the SSL Validation except this time you will set Name to ‘www’ set it CNAME as the type default to 1h and then set data to the CloudFront URL that you have just copied from AWS. </li>\n<li>As like before this will take a minute to go through all of the checks so just be patient. </li>\n</ol>\n<h3>CONGRATS!!! YOU DID IT</h3>\n<p>That’s it you are the master of your own Domain ;D</p>\n<h5>Sources:</h5>\n<p><a href=\"https://medium.com/faun/deploy-static-website-to-amazon-s3-from-github-repository-3f1245d2a780\">Deploy Static Website to Amazon S3 from Github Repository</a></p>\n<p><a href=\"https://medium.com/@kyle.galbraith/how-to-host-a-website-on-s3-without-getting-lost-in-the-sea-e2b82aa6cd38\">How to Host a Website on S3 Without Getting Lost in the Sea</a></p>\n<p><a href=\"https://medium.com/@aashari\">Deploy Static Website to Amazon S3 from Github Repository</a></p>","frontmatter":{"title":"Hosting Static Sites on AWS","date":"August 26, 2019","description":"Configuring your static site using S3, Cloudfront, and CodeBuild"}}},"pageContext":{"slug":"/190826-Hosting-a-Static-Site-on-s3/","previous":{"fields":{"slug":"/190825-AWS-and-the-Three-Bears/"},"frontmatter":{"title":"AWS and the Three Bears"}},"next":{"fields":{"slug":"/190915-GeoPandas-Install/"},"frontmatter":{"title":"Setting up GeoPanadas on Windows"}}}}}